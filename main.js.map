{"version":3,"file":"main.js","mappings":"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","sources":["webpack://puzzle/./src/core/Observer.js","webpack://puzzle/./src/core/constants.js","webpack://puzzle/./src/core/utils.js","webpack://puzzle/./src/App/ViewApp.js","webpack://puzzle/./src/App/ModelApp.js","webpack://puzzle/./src/components/Cell/Cell.js","webpack://puzzle/./src/components/Board/ViewBoard.js","webpack://puzzle/./src/components/Board/ModelBoard.js","webpack://puzzle/./src/components/Board/ControllerBoard.js","webpack://puzzle/./src/App/App.js","webpack://puzzle/./src/App/ControllerApp.js"],"sourcesContent":["export class Observer {\r\n  constructor() {\r\n    this.listeners = {};\r\n  }\r\n\r\n  emit(event, ...args) {\r\n    if (!Array.isArray(this.listeners[event])) return false;\r\n\r\n    this.listeners[event].forEach(listener => {\r\n      listener(...args);\r\n    });\r\n    return true;\r\n  }\r\n\r\n  subscribe(event, fn) {\r\n    this.listeners[event] = this.listeners[event] || [];\r\n    this.listeners[event].push(fn);\r\n    return () => {\r\n      this.listeners[event] =\r\n        this.listeners[event]\r\n          .filter(listener => listener !== fn);\r\n    };\r\n  }\r\n}\r\n","export const checks = {\r\n  themeCheck: {\r\n    classNode: '.checkbox_theme',\r\n    classIco: '.setting__theme',\r\n  },\r\n  muteCheck: {\r\n    classNode: '.checkbox_mute',\r\n    classIco: '.setting__mute',\r\n  },\r\n};\r\n\r\nexport const buttons = {\r\n  play: '.button_play',\r\n  replay: '.button_replay',\r\n  pause: '.button_pause',\r\n}\r\n\r\nexport const select = {\r\n  classNode: '.setting__size'\r\n};\r\n\r\nexport const sizesBoard = [3, 4, 5];\r\n\r\nexport const boardClass = '.board';\r\n\r\nexport const cell = {\r\n  template: '#cell-template',\r\n  rowClass: 'row',\r\n  cell: '.cell',\r\n  chip: '.chip',\r\n  zeroClass: 'cell_zero',\r\n};\r\n\r\nexport const counterMovesClassValue = '.counter__value.counter_move';\r\nexport const counterTimeClassValue = '.counter__value.counter_time';\r\n","export function generateNumberSet(size) {\r\n  const arr = new Set();\r\n  const length = size ** 2;\r\n\r\n  while (arr.size < length) {\r\n    arr.add(Math.floor(Math.random() * length));\r\n  }\r\n\r\n  return arr;\r\n}\r\n\r\nexport function toTime(sec) {\r\n\r\n  \r\n  let m = Math.floor(sec / 60);\r\n  let s = sec % 60;\r\n  m = m % 60;\r\n  \r\n\r\n  return pad2(m) + \":\" + pad2(s);\r\n}\r\n\r\n\r\nfunction pad2(num) {\r\n    let s = num.toString();\r\n    return (s.length < 2)?(\"0\"+s): s;\r\n}\r\n","import { sizesBoard, boardClass } from '../core/constants';\r\nimport { counterMovesClassValue, counterTimeClassValue } from '../core/constants';\r\nimport { toTime } from '../core/utils';\r\nexport class ViewApp {\r\n  constructor(observer) {\r\n    this._body = document.querySelector('body');\r\n    this._observer = observer;\r\n    this._setButtons = this._setButtons.bind(this);\r\n    this._setMute = this._setMute.bind(this);\r\n    this._setTheme = this._setTheme.bind(this);\r\n    this._setSize = this._setSize.bind(this);\r\n    this._setSteps = this._setSteps.bind(this);\r\n    this._setTime = this._setTime.bind(this);\r\n  }\r\n\r\n  init(buttons, checks, select) {\r\n    this._buttonsNode = {};\r\n    this._checksNode = {};\r\n    this._selectNode = {};\r\n    this._boardNode = document.querySelector(boardClass);\r\n\r\n    for (let button in buttons) {\r\n      this._buttonsNode[button] = document.querySelector(buttons[button].class);\r\n      this._onListener(this._buttonsNode[button], 'click', buttons[button].cb);\r\n    }\r\n\r\n    for (let check in checks) {\r\n      this._checksNode[check] = {}\r\n      this._checksNode[check].node = document.querySelector(checks[check].dataInit.classNode);\r\n      this._checksNode[check].nodeIco = document.querySelector(checks[check].dataInit.classIco);\r\n      this._onListener(this._checksNode[check].node, 'change', checks[check].cb);\r\n    }\r\n\r\n    this._selectNode = document.querySelector(select.size.class);\r\n    sizesBoard.forEach((option) => {\r\n      let newOption = new Option(`${option}x${option}`, option);\r\n      this._selectNode.append(newOption);\r\n    });\r\n    this._onListener(this._selectNode, 'change', select.size.cb);\r\n\r\n\r\n    this._counterMoviesValueNode = document.querySelector(counterMovesClassValue);\r\n    this._counterTimeValueNode = document.querySelector(counterTimeClassValue);\r\n\r\n    this._observer.subscribe('modelApp:setButton', this._setButtons);\r\n    this._observer.subscribe('modelApp:setMute', this._setMute);\r\n    this._observer.subscribe('modelApp:setTheme', this._setTheme);\r\n    this._observer.subscribe('controllerApp:setSizeBoard', this._setSize);\r\n    this._observer.subscribe('modelApp:setSteps', this._setSteps);\r\n    this._observer.subscribe('modelApp:setTime', this._setTime);\r\n  }\r\n\r\n  _setTime(time) {\r\n    this._counterTimeValueNode.textContent = toTime(time);\r\n  }\r\n\r\n  _setSteps(steps) {\r\n    this._counterMoviesValueNode.textContent = steps;\r\n  }\r\n\r\n  _setSize(sizeIndex) {\r\n    console.log(`ViewApp: setSize`);\r\n    this._selectNode.selectedIndex = sizeIndex;\r\n  }\r\n\r\n  _setButtons(buttons) {\r\n    for (let button in buttons) {\r\n      buttons[button]\r\n        ? this._changeClass(this._buttonsNode[button], false, 'button_disabled')\r\n        : this._changeClass(this._buttonsNode[button], 'button_disabled', false)\r\n    }\r\n\r\n    !buttons.play\r\n      ? this._changeClass(this._boardNode, 'board_open', null)\r\n      : this._changeClass(this._boardNode, null, 'board_open');\r\n  }\r\n\r\n  _setMute({ mute, ico }) {\r\n    this._icoChange(this._checksNode.mute.nodeIco, ico);\r\n  }\r\n\r\n  _setTheme({ theme, ico }) {\r\n    this._icoChange(this._checksNode.theme.nodeIco, ico);\r\n    theme\r\n      ? this._changeClass(this._body, 'theme__dark', 'theme__light')\r\n      : this._changeClass(this._body, 'theme__light', 'theme__dark');\r\n  }\r\n\r\n  //TODO Перенести в утилиты\r\n  _icoChange(node, icoName) {\r\n    node.textContent = icoName;\r\n  }\r\n  //TODO Перенести в утилиты\r\n  _onListener(node, event, handle) {\r\n    node.addEventListener(event, function () {\r\n      handle(this);\r\n    });\r\n  }\r\n  //TODO Перенести в утилиты\r\n  _changeClass(node, classOn, classOff) {\r\n    if (classOn) node.classList.add(classOn);\r\n    if (classOff) node.classList.remove(classOff);\r\n  }\r\n}\r\n","export class ModelApp {\r\n  constructor(observer) {\r\n    this._observer = observer;\r\n    this._storageKey = 'puzzleApp';\r\n\r\n    this._state = {\r\n      buttons: {\r\n        play: null,\r\n        replay: null,\r\n        pause: null,\r\n      },\r\n      checks: {\r\n        mute: null,\r\n        theme: null,\r\n      },\r\n      mute: null,\r\n      theme: null,\r\n      steps: null,\r\n      time: null,\r\n    }\r\n\r\n    this._themeIco = {\r\n      icoOn: 'light_mode',\r\n      icoOff: 'dark_mode',\r\n    }\r\n\r\n    this._muteIco = {\r\n      icoOn: 'volume_up',\r\n      icoOff: 'volume_off',\r\n    }\r\n\r\n    this._addTime = this._addTime.bind(this);\r\n  }\r\n\r\n  init() {\r\n    // загрузить из storage\r\n    this._setInitButtonState();\r\n    this.setTheme(false);\r\n    this.setMute(true);\r\n    this.setSteps(0);\r\n    this.setTime(0);\r\n  }\r\n\r\n  setTime(time) {\r\n    this._state.time = time;\r\n    this._observer.emit('modelApp:setTime', time);\r\n  }\r\n\r\n  _addTime() {\r\n    this._state.time++;\r\n    this.setTime(this._state.time);\r\n  }\r\n\r\n  runTimer() {\r\n    this._timer = setInterval(this._addTime, 1000);\r\n  }\r\n\r\n  stopTimer() {\r\n    clearTimeout(this._timer);\r\n  }\r\n\r\n  setSteps(step) {\r\n    this._state.steps = step;\r\n    this._observer.emit('modelApp:setSteps', step);\r\n  }\r\n\r\n  addSteps() {\r\n    this._state.steps++;\r\n    this.setSteps(this._state.steps);\r\n  }\r\n\r\n  setPlayState() {\r\n    this.setButton({ play: false, replay: true, pause: true });\r\n  }\r\n\r\n  setPauseState() {\r\n    this.setButton({ play: true, replay: true, pause: false });\r\n  }\r\n\r\n  setReplayState() {\r\n    this._setInitButtonState();\r\n    this.stopTimer();\r\n    this.setSteps(0);\r\n    this.setTime(0);\r\n  }\r\n\r\n  _setInitButtonState() {\r\n    this.setButton({ play: true, replay: false, pause: false });\r\n  };\r\n\r\n  setButton({ play, replay, pause }) {\r\n    this._state.buttons.play = play;\r\n    this._state.buttons.replay = replay\r\n    this._state.buttons.pause = pause;\r\n    this._observer.emit('modelApp:setButton', this._state.buttons);\r\n  }\r\n\r\n  //TODO Создать один метод \r\n  setTheme(theme) {\r\n    this._state.theme = theme;\r\n    let ico;\r\n    this._state.theme\r\n      ? ico = this._themeIco.icoOn\r\n      : ico = this._themeIco.icoOff;\r\n    this._observer.emit('modelApp:setTheme', { theme: this._state.theme, ico: ico });\r\n  }\r\n\r\n  setMute(mute) {\r\n    this._state.mute = mute;\r\n    let ico;\r\n    this._state.mute\r\n      ? ico = this._muteIco.icoOn\r\n      : ico = this._muteIco.icoOff;\r\n    this._observer.emit('modelApp:setMute', { mute: this._state.mute, ico: ico });\r\n  }\r\n}\r\n","import { cell } from '../../core/constants';\r\n\r\nexport class Cell {\r\n  static _template = document.querySelector(cell.template).content;\r\n\r\n  constructor(num, { col, row }) {\r\n    this._num = num;\r\n    this._col = col;\r\n    this._row = row;\r\n  }\r\n\r\n  createCell() {\r\n    this._element = Cell._template.cloneNode(true);\r\n\r\n    this._chip = this._element.querySelector(cell.chip);\r\n    this._chip.textContent = this._num;\r\n\r\n    this._chip.closest('.cell').dataset.row = this._row;\r\n    this._chip.closest('.cell').dataset.col = this._col;\r\n\r\n    if (this._num === 0) {\r\n      this._chip.closest('.cell').dataset.type = 'zero';\r\n      this._chip.remove();\r\n    }\r\n    return this._element;\r\n  }\r\n}\r\n","import { boardClass, cell } from '../../core/constants';\r\n\r\nexport class ViewBoard {\r\n  constructor({ instance, handle, observer }) {\r\n    this._cellInstance = instance;\r\n    this._onClick = handle;\r\n    this._observer = observer;\r\n    this._root = document.querySelector(boardClass);\r\n    this._moveGood = this._moveGood.bind(this);\r\n    this._moveBad = this._moveBad.bind(this);\r\n  }\r\n\r\n  init() {\r\n    this._observer.subscribe('modelBoard:moveIsAllowed', this._moveGood);\r\n    this._observer.subscribe('modelBoard:moveIsNotAllowed', this._moveBad);\r\n  }\r\n\r\n  _moveGood() {\r\n    this._zeroNode = this._root.querySelector('[data-type=\"zero\"]');\r\n\r\n    const coordCurrent = this._currentNode.getBoundingClientRect();\r\n    const coordZero = this._zeroNode.getBoundingClientRect();\r\n\r\n    if (coordCurrent.y === coordZero.y) {\r\n      if (coordCurrent.x > coordZero.x) {\r\n        this._move('left', coordCurrent.x - coordZero.x);\r\n      }\r\n      else {\r\n        this._move('right', coordZero.x - coordCurrent.x);\r\n      }\r\n    } else {\r\n      if (coordCurrent.y > coordZero.y) {\r\n        this._move('up', coordCurrent.y - coordZero.y);\r\n      }\r\n      else {\r\n        this._move('down', coordZero.y - coordCurrent.y);\r\n      }\r\n    }\r\n\r\n    this._observer.emit('viewBoard:addStep');\r\n  }\r\n\r\n  _move(direction, delta) {\r\n    const delayMs = 1000;\r\n\r\n    this._root.style.pointerEvents = 'none';\r\n\r\n    switch (direction) {\r\n      case 'up':\r\n        this._currentNode.style.transform = `translateY(-${delta}px)`;\r\n        break;\r\n      case 'down':\r\n        this._currentNode.style.transform = `translateY(${delta}px)`;\r\n        break;\r\n      case 'left':\r\n        this._currentNode.style.transform = `translateX(-${delta}px)`;\r\n        break;\r\n      case 'right':\r\n        console.log('right');\r\n        this._currentNode.style.transform = `translateX(${delta}px)`;\r\n        break;\r\n      default: return null;\r\n    }\r\n\r\n    setTimeout(() => {\r\n      this._currentNode.style.transform = null;\r\n      this._currentNode.closest('.cell').dataset.type = 'zero';\r\n      this._zeroNode.appendChild(this._currentNode);\r\n      delete this._zeroNode.dataset.type;\r\n      this._zero = this._current;\r\n      this._root.style.pointerEvents = 'auto';\r\n    }, delayMs);\r\n  }\r\n\r\n  _moveBad() {\r\n    // TODO звук неудачного хода, если звук включен\r\n  }\r\n\r\n  clearBoard() {\r\n    this._root.innerHTML = '';\r\n  }\r\n\r\n  _handleClick = (event, data) => {\r\n    this._currentNode = event.target;\r\n    this._current = data.current;\r\n    this._onClick(data);\r\n  }\r\n\r\n  renderBoard(board) {\r\n    const boardNodes = new DocumentFragment();\r\n\r\n    for (let rowIndex = 0; rowIndex < board.length; rowIndex++) {\r\n      const row = document.createElement('div');\r\n      row.classList.add(cell.rowClass);\r\n\r\n      for (let colIndex = 0; colIndex < board.length; colIndex++) {\r\n        const cell = new this._cellInstance(board[rowIndex][colIndex], { col: colIndex, row: rowIndex })\r\n        if (board[rowIndex][colIndex] === 0) this._zero = { col: colIndex, row: rowIndex };\r\n        row.append(cell.createCell());\r\n      }\r\n\r\n      boardNodes.append(row);\r\n    }\r\n\r\n    this._root.append(boardNodes);\r\n    this._setEventListeners();\r\n  }\r\n\r\n  _setEventListeners() {\r\n    const cells = this._root.querySelectorAll(cell.chip);\r\n\r\n    cells.forEach((node) => {\r\n      node.addEventListener('click', (event) => {\r\n        this._handleClick(event, {\r\n          zero: this._zero,\r\n          current: {\r\n            col: +node.closest('.cell').dataset.col,\r\n            row: +node.closest('.cell').dataset.row,\r\n          }\r\n        });\r\n      })\r\n    })\r\n  }\r\n}\r\n","import { generateNumberSet } from '../../core/utils';\r\nimport { sizesBoard } from '../../core/constants';\r\n\r\nexport class ModelBoard {\r\n  constructor(observer) {\r\n    this._observer = observer;\r\n    this._storageKey = 'puzzleBoard';\r\n    \r\n    this._state = {\r\n      sizeIndex: null,\r\n      sizeBoard: null,\r\n      board: null,\r\n    };\r\n\r\n    this._setSizeBoard = this._setSizeBoard.bind(this);\r\n  }\r\n\r\n  init() {\r\n    this._setSizeBoard(0);\r\n    this._observer.subscribe('controllerApp:ChangeSizeBoard', this._setSizeBoard);\r\n  }\r\n\r\n  _setSizeBoard(sizeIndex, renderBoard) {\r\n    this._state.sizeIndex = sizeIndex;\r\n    this._state.sizeBoard = sizesBoard[sizeIndex];\r\n    this._genBoard();\r\n  }\r\n\r\n  _genBoard() {\r\n    const arrNumber = [...generateNumberSet(this._state.sizeBoard)];\r\n    let counter = 0;\r\n\r\n    this._state.board = Array(this._state.sizeBoard);\r\n    for (let i = 0; i < this._state.sizeBoard; i++) {\r\n      this._state.board[i] = Array(this._state.sizeBoard);\r\n      for (let j = 0; j < this._state.sizeBoard; j++) {\r\n        this._state.board[i][j] = arrNumber[counter++];\r\n      }\r\n    }\r\n\r\n    this._observer.emit('modelBoard:genBoard', this._state.board);\r\n  }\r\n\r\n  move(data) {\r\n    if (this._availableMovies(data.zero).some(({ row, col }) =>\r\n      (row === data.current.row) && (col === data.current.col))) {\r\n      this._state.board[data.zero.row][data.zero.col] = this._state.board[data.current.row][data.current.col];\r\n      this._state.board[data.current.row][data.current.col] = 0;\r\n      this._observer.emit('modelBoard:moveIsAllowed', null);\r\n    } else {\r\n      this._observer.emit('modelBoard:moveIsNotAllowed', null);\r\n    }\r\n  }\r\n\r\n  _availableMovies(zeroCoordinates) {\r\n    const { col, row } = zeroCoordinates;\r\n\r\n    const possibleMovies = [\r\n      { row: row - 1, col: col },\r\n      { row: row + 1, col: col },\r\n      { row: row, col: col - 1 },\r\n      { row: row, col: col + 1 }\r\n    ];\r\n\r\n    return possibleMovies.filter(({ row, col }) => {\r\n      return (\r\n        (row >= 0) && (row < (this._state.sizeBoard)) &&\r\n        (col >= 0) && (col < (this._state.sizeBoard)));\r\n    });\r\n  }\r\n}","import { Cell } from '../Cell/Cell';\r\nimport { ViewBoard } from './ViewBoard';\r\nimport { ModelBoard } from './ModelBoard';\r\n\r\nexport class ControllerBoard {\r\n  constructor(observer) {\r\n    this._observer = observer;\r\n    this._handleClick = this._handleClick.bind(this);\r\n    this._renderBoard = this._renderBoard.bind(this);\r\n  }\r\n\r\n  _init() {\r\n    this._observer.subscribe('modelBoard:genBoard', this._renderBoard);\r\n\r\n    this._viewBoard = new ViewBoard({\r\n      instance: Cell,\r\n      handle: this._handleClick,\r\n      observer: this._observer,\r\n    });\r\n    this._viewBoard.init();\r\n\r\n    this._modelBoard = new ModelBoard(this._observer, this._storage);\r\n    this._modelBoard.init();\r\n  }\r\n\r\n  run() {\r\n    this._init();\r\n  }\r\n\r\n  changeSizeBoard(sizeIndex) {\r\n    this._modelBoard._setSizeBoard(sizeIndex);\r\n  }\r\n\r\n  _renderBoard(board) {\r\n    this._viewBoard.clearBoard();\r\n    this._viewBoard.renderBoard(board);\r\n  }\r\n\r\n  _handleClick(data) {\r\n    this._modelBoard.move(data);\r\n  }\r\n}\r\n","import './App.css';\r\nimport { Observer } from '../core/Observer';\r\nimport { ControllerApp } from './ControllerApp';\r\n\r\nconst observer = new Observer();\r\n\r\nconst app = new ControllerApp(observer);\r\n\r\napp.run();","import { ViewApp } from './ViewApp';\r\nimport { ModelApp } from './ModelApp';\r\nimport { ControllerBoard } from '../components/Board/ControllerBoard';\r\nimport { checks, buttons, select } from '../core/constants';\r\n\r\nexport class ControllerApp {\r\n  constructor(observer) {\r\n    this._observer = observer;\r\n    this._addStep = this._addStep.bind(this);\r\n  }\r\n\r\n  init() {\r\n    this.buttons = {\r\n      play: { class: buttons.play, cb: this.handlePlay },\r\n      replay: { class: buttons.replay, cb: this.handleReplay },\r\n      pause: { class: buttons.pause, cb: this.handlePause },\r\n    }\r\n\r\n    this.checks = {\r\n      theme: { dataInit: checks.themeCheck, cb: this.handleChangeTheme },\r\n      mute: { dataInit: checks.muteCheck, cb: this.handleChangeMute },\r\n    }\r\n\r\n    this.select = {\r\n      size: {\r\n        class: select.classNode,\r\n        options: select.options,\r\n        cb: this.handleChangeSizeBoard\r\n      },\r\n    }\r\n    \r\n    this._observer.subscribe('viewBoard:addStep', this._addStep);\r\n  }\r\n\r\n  run() {\r\n    this.init();\r\n\r\n    this._viewApp = new ViewApp(this._observer);\r\n    this._viewApp.init(this.buttons, this.checks, this.select);\r\n\r\n    this._modelApp = new ModelApp(this._observer, this._storage);\r\n    this._modelApp.init();\r\n\r\n    this._controllerBoard = new ControllerBoard(this._observer, this._storage);\r\n    this._controllerBoard.run();\r\n  }\r\n\r\n  handlePlay = () => {\r\n    this._modelApp.setPlayState();\r\n    this._modelApp.runTimer();\r\n  }\r\n\r\n  handlePause = () => {\r\n    this._modelApp.setPauseState();\r\n    this._modelApp.stopTimer();\r\n  }\r\n\r\n  handleReplay = () => {\r\n    this._modelApp.setReplayState();\r\n  }\r\n\r\n  handleChangeMute = (node) => {\r\n    this._modelApp.setMute(!node.checked);\r\n  }\r\n\r\n  handleChangeTheme = (node) => {\r\n    this._modelApp.setTheme(node.checked);\r\n  }\r\n\r\n  handleChangeSizeBoard = (node) => {\r\n    this._observer.emit('controllerApp:ChangeSizeBoard', node.selectedIndex);\r\n    this._controllerBoard.changeSizeBoard(node.selectedIndex);\r\n  }\r\n\r\n  _addStep() {\r\n    this._modelApp.addSteps();\r\n  }\r\n}\r\n"],"names":["Observer","_classCallCheck","this","listeners","key","value","event","_len","arguments","length","args","Array","_key","isArray","forEach","listener","apply","fn","_this","push","filter","checks","themeCheck","classNode","classIco","muteCheck","select","sizesBoard","boardClass","cell","pad2","num","s","toString","ViewApp","observer","_body","document","querySelector","_observer","_setButtons","bind","_setMute","_setTheme","_setSize","_setSteps","_setTime","buttons","button","_buttonsNode","_checksNode","_selectNode","_boardNode","class","_onListener","cb","check","node","dataInit","nodeIco","size","option","newOption","Option","concat","append","_counterMoviesValueNode","_counterTimeValueNode","subscribe","time","sec","m","textContent","Math","floor","steps","sizeIndex","console","log","selectedIndex","_changeClass","play","_ref","mute","ico","_icoChange","_ref2","theme","icoName","handle","addEventListener","classOn","classOff","classList","add","remove","ModelApp","_storageKey","_state","replay","pause","_themeIco","icoOn","icoOff","_muteIco","_addTime","_setInitButtonState","setTheme","setMute","setSteps","setTime","emit","_timer","setInterval","clearTimeout","step","setButton","stopTimer","Cell","col","row","_num","_col","_row","_element","_template","cloneNode","_chip","closest","dataset","type","content","ViewBoard","instance","_defineProperty","data","_currentNode","target","_current","current","_onClick","_cellInstance","_root","_moveGood","_moveBad","_zeroNode","coordCurrent","getBoundingClientRect","coordZero","y","x","_move","direction","delta","_this2","style","pointerEvents","transform","setTimeout","appendChild","_zero","innerHTML","board","boardNodes","DocumentFragment","rowIndex","createElement","colIndex","createCell","_setEventListeners","_this3","querySelectorAll","_handleClick","zero","ModelBoard","sizeBoard","_setSizeBoard","renderBoard","_genBoard","arrNumber","arr","Set","pow","random","generateNumberSet","counter","i","j","_availableMovies","some","zeroCoordinates","ControllerBoard","_renderBoard","_viewBoard","init","_modelBoard","_storage","_init","clearBoard","move","ControllerApp","_modelApp","setPlayState","runTimer","setPauseState","setReplayState","checked","_controllerBoard","changeSizeBoard","_addStep","handlePlay","handleReplay","handlePause","handleChangeTheme","handleChangeMute","options","handleChangeSizeBoard","_viewApp","run","addSteps"],"sourceRoot":""}